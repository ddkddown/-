## redis 与 mysql 数据同步

### Cache Aside

1. 缓存中的数据需要设定失效时间
2. 读请求命中缓存直接返回数据
3. 读请求未命中缓存打到数据库，成功后再进行缓存同时返回结果
4. 对于更新删除请求，先将数据库数据更新，再让缓存失效。



但是此方法仍然存在漏洞，考虑两个操作，A进行读取，B进行修改。

A先进行读取时未命中，于是打到了数据库，此时B发起了数据库修改操作，若B先于A进行了缓存失效操作，A在之后进行了数据缓存操作，就会将旧数据写入缓存。

但是发生概率较低，因为写操作一般比较慢，B先于A完成的情况较少。